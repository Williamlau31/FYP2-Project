<ion-header class="custom-header">
  <ion-toolbar class="custom-toolbar">
    <ion-title class="header-title">
      <div class="title-content">
        <ion-icon name="medical" class="header-icon"></ion-icon>
        <span>BookItNow Dashboard</span>
      </div>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="logout()" class="logout-button">
        <ion-icon name="log-out-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="dashboard-content">
  @if (currentUser) {
    <!-- Welcome Section -->
    <div class="welcome-section">
      <div class="welcome-card">
        <div class="user-avatar">
          <ion-icon name="person-circle" class="avatar-icon"></ion-icon>
        </div>
        <div class="welcome-text">
          <h1 class="welcome-title">Welcome back, {{ currentUser.name }}!</h1>
          <div class="user-role">
            <ion-chip [color]="isAdmin ? 'danger' : 'primary'" class="role-chip">
              <ion-icon [name]="isAdmin ? 'shield-checkmark' : 'person'"></ion-icon>
              <ion-label>{{ currentUser.role | titlecase }}</ion-label>
            </ion-chip>
          </div>
          <p class="welcome-subtitle">Manage your healthcare operations efficiently</p>
        </div>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="stats-section">
      <h2 class="section-title">
        <ion-icon name="analytics" class="section-icon"></ion-icon>
        Quick Overview
      </h2>
      <div class="stats-grid">
        <div class="stat-card appointments-stat">
          <div class="stat-icon">
            <ion-icon name="calendar"></ion-icon>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">24</h3>
            <p class="stat-label">Today's Appointments</p>
          </div>
        </div>
        
        <div class="stat-card patients-stat">
          <div class="stat-icon">
            <ion-icon name="people"></ion-icon>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">156</h3>
            <p class="stat-label">Total Patients</p>
          </div>
        </div>
        
        <div class="stat-card queue-stat">
          <div class="stat-icon">
            <ion-icon name="time"></ion-icon>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">8</h3>
            <p class="stat-label">In Queue</p>
          </div>
        </div>
        
        @if (isAdmin) {
          <div class="stat-card staff-stat">
            <div class="stat-icon">
              <ion-icon name="medical"></ion-icon>
            </div>
            <div class="stat-content">
              <h3 class="stat-number">12</h3>
              <p class="stat-label">Staff Members</p>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Main Navigation -->
    <div class="navigation-section">
      <h2 class="section-title">
        <ion-icon name="apps" class="section-icon"></ion-icon>
        Main Modules
      </h2>
      <div class="menu-grid">
        <ion-card button (click)="navigate('/appointments')" class="menu-card appointments-card">
          <div class="card-background"></div>
          <ion-card-content class="menu-item">
            <div class="menu-icon-wrapper">
              <ion-icon name="calendar" class="menu-icon"></ion-icon>
            </div>
            <div class="menu-content">
              <h3 class="menu-title">Appointments</h3>
              <p class="menu-description">Schedule and manage patient appointments</p>
              <div class="menu-features">
                <span class="feature-tag">Schedule</span>
                <span class="feature-tag">Manage</span>
                <span class="feature-tag">Track</span>
              </div>
            </div>
            <ion-icon name="chevron-forward" class="menu-arrow"></ion-icon>
          </ion-card-content>
        </ion-card>

        <ion-card button (click)="navigate('/patients')" class="menu-card patients-card">
          <div class="card-background"></div>
          <ion-card-content class="menu-item">
            <div class="menu-icon-wrapper">
              <ion-icon name="people" class="menu-icon"></ion-icon>
            </div>
            <div class="menu-content">
              <h3 class="menu-title">Patients</h3>
              <p class="menu-description">Manage patient records and information</p>
              <div class="menu-features">
                <span class="feature-tag">Records</span>
                <span class="feature-tag">History</span>
                <span class="feature-tag">Contact</span>
              </div>
            </div>
            <ion-icon name="chevron-forward" class="menu-arrow"></ion-icon>
          </ion-card-content>
        </ion-card>

        @if (isAdmin) {
          <ion-card button (click)="navigate('/staff')" class="menu-card staff-card">
            <div class="card-background"></div>
            <ion-card-content class="menu-item">
              <div class="menu-icon-wrapper">
                <ion-icon name="medical" class="menu-icon"></ion-icon>
              </div>
              <div class="menu-content">
                <h3 class="menu-title">Staff Management</h3>
                <p class="menu-description">Manage healthcare staff and roles</p>
                <div class="menu-features">
                  <span class="feature-tag">Doctors</span>
                  <span class="feature-tag">Nurses</span>
                  <span class="feature-tag">Admin</span>
                </div>
              </div>
              <ion-icon name="chevron-forward" class="menu-arrow"></ion-icon>
            </ion-card-content>
          </ion-card>
        }

        <ion-card button (click)="navigate('/queue')" class="menu-card queue-card">
          <div class="card-background"></div>
          <ion-card-content class="menu-item">
            <div class="menu-icon-wrapper">
              <ion-icon name="time" class="menu-icon"></ion-icon>
            </div>
            <div class="menu-content">
              <h3 class="menu-title">Patient Queue</h3>
              <p class="menu-description">Monitor and manage patient waiting queue</p>
              <div class="menu-features">
                <span class="feature-tag">Waiting</span>
                <span class="feature-tag">Called</span>
                <span class="feature-tag">Status</span>
              </div>
            </div>
            <ion-icon name="chevron-forward" class="menu-arrow"></ion-icon>
          </ion-card-content>
        </ion-card>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="activity-section">
      <h2 class="section-title">
        <ion-icon name="pulse" class="section-icon"></ion-icon>
        Recent Activity
      </h2>
      <div class="activity-list">
        <div class="activity-item">
          <div class="activity-icon success">
            <ion-icon name="checkmark-circle"></ion-icon>
          </div>
          <div class="activity-content">
            <h4>Appointment Completed</h4>
            <p>John Doe's consultation finished</p>
            <span class="activity-time">2 minutes ago</span>
          </div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon primary">
            <ion-icon name="person-add"></ion-icon>
          </div>
          <div class="activity-content">
            <h4>New Patient Registered</h4>
            <p>Sarah Johnson added to system</p>
            <span class="activity-time">15 minutes ago</span>
          </div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon warning">
            <ion-icon name="time"></ion-icon>
          </div>
          <div class="activity-content">
            <h4>Queue Updated</h4>
            <p>3 patients added to waiting queue</p>
            <span class="activity-time">1 hour ago</span>
          </div>
        </div>
      </div>
    </div>
  } @else {
    <!-- Not Logged In State -->
    <div class="not-logged-in">
      <div class="login-prompt">
        <ion-icon name="lock-closed" class="lock-icon"></ion-icon>
        <h2>Access Required</h2>
        <p>Please log in to access the dashboard</p>
        <ion-button routerLink="/login" expand="block" size="large" class="login-redirect-button">
          <ion-icon name="log-in" slot="start"></ion-icon>
          Go to Login
        </ion-button>
      </div>
    </div>
  }
</ion-content>
