<ion-header>
  <ion-toolbar>
    <ion-title>BookItNow - {{ currentUser?.role === 'admin' ? 'Admin Dashboard' : 'Patient Portal' }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="navigateToProfile()">
        <ion-icon slot="icon-only" name="person-circle-outline"></ion-icon>
      </ion-button>
      <ion-button (click)="logout()">
        <ion-icon slot="icon-only" name="log-out-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- User Welcome Section -->
  <ion-card *ngIf="currentUser">
    <ion-card-content>
      <div class="welcome-section">
        <ion-avatar>
          <img [src]="currentUser.avatar" alt="User Avatar">
        </ion-avatar>
        <div>
          <h2>Welcome, {{ currentUser.name }}!</h2>
          <p>
            <ion-chip [color]="currentUser.role === 'admin' ? 'primary' : 'secondary'">
              <ion-icon [name]="currentUser.role === 'admin' ? 'shield-checkmark' : 'person'"></ion-icon>
              <ion-label>{{ currentUser.role | titlecase }}</ion-label>
            </ion-chip>
          </p>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Admin Features -->
  <ion-card *ngIf="isAdmin">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="settings" color="primary"></ion-icon>
        Admin Management
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="button-grid">
        <ion-button expand="block" (click)="navigateToPatients()" fill="outline">
          <ion-icon slot="start" name="people"></ion-icon>
          Manage Patients
        </ion-button>
        <ion-button expand="block" (click)="navigateToStaff()" fill="outline">
          <ion-icon slot="start" name="medical"></ion-icon>
          Manage Staff
        </ion-button>
        <ion-button expand="block" (click)="navigateToAppointments()" fill="outline">
          <ion-icon slot="start" name="calendar"></ion-icon>
          All Appointments
        </ion-button>
        <ion-button expand="block" (click)="navigateToQueue()" fill="outline">
          <ion-icon slot="start" name="time"></ion-icon>
          Queue Management
        </ion-button>
        <ion-button expand="block" (click)="navigateToReports()" fill="outline">
          <ion-icon slot="start" name="analytics"></ion-icon>
          Reports & Analytics
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- User/Patient Features -->
  <ion-card *ngIf="isUser">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="heart" color="secondary"></ion-icon>
        Patient Services
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="button-grid">
        <ion-button expand="block" (click)="navigateToAppointments()" fill="outline">
          <ion-icon slot="start" name="calendar"></ion-icon>
          My Appointments
        </ion-button>
        <ion-button expand="block" (click)="navigateToCreateAppointment()" fill="outline">
          <ion-icon slot="start" name="add-circle"></ion-icon>
          Book Appointment
        </ion-button>
        <ion-button expand="block" (click)="navigateToQueue()" fill="outline">
          <ion-icon slot="start" name="time"></ion-icon>
          Check Queue Status
        </ion-button>
        <ion-button expand="block" (click)="navigateToProfile()" fill="outline">
          <ion-icon slot="start" name="person"></ion-icon>
          My Profile
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Quick Stats (Admin Only) -->
  <ion-card *ngIf="isAdmin">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="stats-chart" color="tertiary"></ion-icon>
        Quick Stats
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="stats-grid">
        <div class="stat-item">
          <ion-icon name="people" color="primary"></ion-icon>
          <div>
            <h3>1,250</h3>
            <p>Total Patients</p>
          </div>
        </div>
        <div class="stat-item">
          <ion-icon name="calendar" color="secondary"></ion-icon>
          <div>
            <h3>28</h3>
            <p>Today's Appointments</p>
          </div>
        </div>
        <div class="stat-item">
          <ion-icon name="time" color="warning"></ion-icon>
          <div>
            <h3>5</h3>
            <p>Queue Length</p>
          </div>
        </div>
        <div class="stat-item">
          <ion-icon name="medical" color="success"></ion-icon>
          <div>
            <h3>12</h3>
            <p>Active Staff</p>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Recent Activity (User Only) -->
  <ion-card *ngIf="isUser">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="time" color="tertiary"></ion-icon>
        Recent Activity
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
          <ion-label>
            <h3>Appointment Completed</h3>
            <p>Dr. Emily Wilson - Jan 25, 2024</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="calendar" color="primary" slot="start"></ion-icon>
          <ion-label>
            <h3>Upcoming Appointment</h3>
            <p>Dr. Robert Davis - Jan 31, 2024</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Debug Section -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="bug" color="warning"></ion-icon>
        Quick Test Links
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="button-grid">
        <ion-button expand="block" routerLink="/patient/list" fill="clear" size="small">
          <ion-icon slot="start" name="people"></ion-icon>
          Test Patients
        </ion-button>
        <ion-button expand="block" routerLink="/appointment/list" fill="clear" size="small">
          <ion-icon slot="start" name="calendar"></ion-icon>
          Test Appointments
        </ion-button>
        <ion-button expand="block" routerLink="/staff/list" fill="clear" size="small">
          <ion-icon slot="start" name="medical"></ion-icon>
          Test Staff
        </ion-button>
        <ion-button expand="block" routerLink="/queue/list" fill="clear" size="small">
          <ion-icon slot="start" name="time"></ion-icon>
          Test Queue
        </ion-button>
        <ion-button expand="block" routerLink="/reporting/dashboard" fill="clear" size="small">
          <ion-icon slot="start" name="analytics"></ion-icon>
          Test Reports
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>


